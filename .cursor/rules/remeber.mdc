---
alwaysApply: true
---

Always follow .cursor/remember.md

---

## ğŸ“Œ Cursor Project Rules â€” nuxt-base-starter

### 1ï¸âƒ£ Zasady ogÃ³lne projektu

* Projekt jest **Nuxt full-stack** (jeden framework, jeden jÄ™zyk).
* Priorytet: **systemowy porzÄ…dek + minimalizm**, nie â€framework w frameworkuâ€.
* Decyzje architektoniczne sÄ… waÅ¼niejsze niÅ¼ skrÃ³ty implementacyjne.
* JeÅ›li coÅ› jest niejasne â†’ **sprawdÅº `.cursor/remember.md`**.

---

### 2ï¸âƒ£ Warstwy i odpowiedzialnoÅ›ci (MUST FOLLOW)

**`app/` â€” UI**

* Komponenty Vue sÄ… **presentational**.
* âŒ Brak fetch w komponentach i sekcjach.
* UI oparte o **Nuxt UI**.
* Animacje tylko przez **motion-v**.

**`app/composables/resources/`**

* âœ… JEDYNE miejsce komunikacji frontend â†” backend.
* Wrappery nad API (`useContactResource`, `useAuthResource`, itd.).

**`server/` â€” backend**

* `server/api/*` = kontrolery HTTP (parse â†’ validate â†’ use-case â†’ DTO).
* âŒ Brak logiki biznesowej w `server/api`.
* DB tylko przez Prisma (repozytoria / serwisy).

**`domain/`**

* Jedyna lokalizacja logiki biznesowej (use-caseâ€™y, reguÅ‚y).
* âŒ Nie zaleÅ¼y od UI ani Nuxt UI.

**`shared/`**

* Kontrakty: **Valibot schemas**, DTO, utils.

**`content/`**

* Tylko treÅ›Ä‡ (pages, blog, portfolio).
* âŒ Brak logiki aplikacyjnej.

---

### 3ï¸âƒ£ Formularze

* Wszystkie formularze uÅ¼ywajÄ… **`useForm()`**.
* `useForm` = single source of truth dla:

  * values, pending, errors, formError
  * walidacji (Valibot)
  * mapowania bÅ‚Ä™dÃ³w API
* Integracja z **Nuxt UI `UForm`**.
* âŒ Brak rÄ™cznej obsÅ‚ugi submit/pending w komponentach.

---

### 4ï¸âƒ£ Sekcje stron (Page Builder)

* Strony sÄ… **content-driven** (`PageSchema + sections[]`).
* KaÅ¼da sekcja:

  * dziedziczy z `SectionBaseSchema`,
  * renderowana przez `SectionsRenderer`.
* **`PageSection.vue` (UPageSection)** = jedyny wrapper sekcji.
* `enabled: false` wyÅ‚Ä…cza sekcjÄ™.
* Page CTA > Global CTA (bez duplikacji).

---

### 5ï¸âƒ£ API & bÅ‚Ä™dy

* Jeden format odpowiedzi API (success / error).
* Walidacja inputÃ³w **zawsze** przez Valibot.
* `422 VALIDATION_ERROR` â†’ `issues[]` mapowane do bÅ‚Ä™dÃ³w pÃ³l w `useForm`.
* Komponenty UI **nie interpretujÄ…** bÅ‚Ä™dÃ³w API â€” robi to `useForm`.

---

## ğŸ§  Zasady Nuxt â€” AUTO-IMPORTY (OBOWIÄ„ZUJÄ„CE)

### 6ï¸âƒ£ Auto-importy â€” co wolno

* Korzystaj z auto-importÃ³w dla:

  * Vue (`ref`, `computed`, `watch`, itd.)
  * Nuxt composables (`useRoute`, `useFetch`, `useAsyncData`)
  * plikÃ³w z `composables/`, `utils/`
* Komponenty z `components/` sÄ… auto-importowane.

---

### 7ï¸âƒ£ Auto-importy â€” co KONFIGURUJEMY ÅšWIADOMIE

* Dodatkowe katalogi do auto-importÃ³w dodajemy jawnie w `nuxt.config`:

  ```ts
  imports: {
    dirs: ['constants']
  }
  ```
* Dla komponentÃ³w z prefiksem:

  ```ts
  components: [
    { path: 'app/components', prefix: 'App' }
  ]
  ```
* JeÅ›li definiujesz `components.dirs` rÄ™cznie â†’ **musisz dodaÄ‡ domyÅ›lne katalogi z powrotem**.

---

### 8ï¸âƒ£ Nitro (backend) â€” osobne auto-importy

* Kod serwerowy korzysta z:

  * `nitro.imports`
* Typy H3 (`H3Event`, `EventHandler`) sÄ… dostÄ™pne przez preset â€” nie importuj ich rÄ™cznie, jeÅ›li nie trzeba.

---

### 9ï¸âƒ£ Ograniczenia auto-importÃ³w (WAÅ»NE)

* âŒ Nie polegaj na auto-importach w:

  * `nuxt.config.ts`
  * Nuxt modules
  * layers
* Tam uÅ¼ywaj jawnych importÃ³w lub `#imports`.

---

### ğŸ”Ÿ CzytelnoÅ›Ä‡ > wygoda

* Auto-importy sÄ… OK dla rzeczy **oczywistych**.
* Dla logiki biznesowej (`domain/*`) i waÅ¼nych funkcji:

  * preferuj **jawne importy**.
* JeÅ›li auto-import utrudnia zrozumienie â€skÄ…d to jestâ€ â†’ **nie uÅ¼ywaj go**.

---

## ğŸ“‚ TODO & decyzje

* TODO zapisujemy **wyÅ‚Ä…cznie jako pliki** w `.cursor/todo/`.
* âŒ Nie zostawiamy TODO w komentarzach kodu.
* OdÅ‚oÅ¼one decyzje architektoniczne = TODO typu â€decisionâ€.

---

### ZÅ‚ota zasada

> **JeÅ›li rozwiÄ…zanie Å‚amie ktÃ³rÄ…kolwiek z powyÅ¼szych reguÅ‚ â€” jest bÅ‚Ä™dne, nawet jeÅ›li dziaÅ‚a.**

---

JeÅ›li chcesz, mogÄ™:

* skrÃ³ciÄ‡ to jeszcze do **ultra-krÃ³tkiej wersji (10 linijek)**
* albo przygotowaÄ‡ **wersjÄ™ README / docs/ARCHITECTURE.md**, ktÃ³rÄ… Cursor teÅ¼ bÄ™dzie automatycznie â€Å‚apaÅ‚â€
